# ------------------------------------------------------------------------------
# FILE:        .shellcheckrc
# VERSION:     3.6.7
# DESCRIPTION: ShellCheck Configuration for Dotfiles Framework
# AUTHOR:      Stony64
# CHANGES:     v3.6.7 - Enable severity=warning (focus on actionable issues)
# ------------------------------------------------------------------------------

# --- SHELL & COMPATIBILITY ----------------------------------------------------
shell=bash

# --- SOURCE PATH RESOLUTION ---------------------------------------------------
# SCRIPTDIR = directory of the script being checked
source-path=SCRIPTDIR

# --- GLOBALLY DISABLED CHECKS -------------------------------------------------
# SC1090/1091 - Dynamic sourcing (source "$variable")
#   Reason: Framework uses dynamic module loading
#
# SC2148 - Missing shebang
#   Reason: Sourced library files don't need shebang
#
# SC2034 - Unused variables
#   Reason: Framework exports variables for user scripts
#
# SC2086 - Unquoted word splitting
#   Reason: Intentional in some aliases (e.g., ls flags)
#
# SC2312 - Invoke separately for better error handling
#   Reason: Framework uses $(cmd || fallback) patterns

disable=SC1090,SC1091,SC2148,SC2034,SC2086,SC2312

# --- ENABLED STRICT CHECKS ----------------------------------------------------
# quote-safe-variables           - Warn about unquoted variables
# check-set-e-suppressed         - Warn when set -e is disabled in conditions
# check-indirect-interactive-source - Warn about interactive-only sourcing

enable=quote-safe-variables,check-set-e-suppressed,check-indirect-interactive-source

# --- OUTPUT FORMATTING --------------------------------------------------------
color=always
format=gcc

# --- EXTERNAL SOURCES ---------------------------------------------------------
# Allow sourcing files from outside the repository
# Useful for framework modules in /opt/dotfiles
external-sources=true

# --- SEVERITY THRESHOLD -------------------------------------------------------
# Only report warnings and errors (suppress info/style suggestions)
# Rationale:
#   - Focus on actionable issues (bugs, compatibility, security)
#   - Reduce noise from subjective style preferences
#   - Improve signal-to-noise ratio in CI/CD
#   - Framework code is production-ready, not experimental
#
# Severity levels:
#   error   - Critical issues (syntax errors, undefined behavior)
#   warning - Important issues (potential bugs, portability)
#   info    - Informational (optimization suggestions)
#   style   - Stylistic suggestions (formatting, conventions)
#
# To see all suggestions during development:
#   shellcheck --severity=style <file>
#
severity=warning
